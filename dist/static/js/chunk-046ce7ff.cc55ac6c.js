(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-046ce7ff"],{1427:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("el-form",{ref:"form",staticClass:"search-items",attrs:{model:e.info,size:"mini","label-width":e.options.labelWidth||"0"}},[e._l(e.formList,(function(t,a){return[n("el-form-item",{key:a,staticClass:"search-item",class:e.handleBottom(a),attrs:{label:t.label,prop:"list"+a}},["el-input"===t.component?n("el-input",{attrs:{clearable:"",maxlength:t.maxlength||"-",placeholder:t.name},model:{value:e.info.list[a],callback:function(t){e.$set(e.info.list,a,t)},expression:"info.list[index]"}}):e._e(),"el-select"===t.component?n("el-select",{attrs:{filterable:t.filterable,clearable:"",placeholder:t.name},model:{value:e.info.list[a],callback:function(t){e.$set(e.info.list,a,t)},expression:"info.list[index]"}},e._l(t.list,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.value}})})),1):e._e(),"el-radio-group"===t.component?n("el-radio-group",{staticStyle:{"margin-top":"12px"},attrs:{clearable:""},model:{value:e.info.list[a],callback:function(t){e.$set(e.info.list,a,t)},expression:"info.list[index]"}},e._l(t.list,(function(t){return n("el-radio",{key:t,attrs:{label:t}},[e._v(e._s(t)+" ")])})),1):e._e(),"el-date-picker"===t.component&&"month"!==t.type?n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":t.name+"起始日","end-placeholder":t.name+"结束日"},model:{value:e.info.list[a],callback:function(t){e.$set(e.info.list,a,t)},expression:"info.list[index]"}}):e._e(),"el-date-picker"===t.component&&"month"===t.type?n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"monthrange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":t.name+"起始月","end-placeholder":t.name+"结束月"},model:{value:e.info.list[a],callback:function(t){e.$set(e.info.list,a,t)},expression:"info.list[index]"}}):e._e()],1)]})),n("div",{staticClass:"search-btns"}),n("div",{staticClass:"search-btns reset-position",class:e.formList.length<=4?"reset-bottom":""},[n("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleSubmit()}}},[e._v("查询")]),n("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")])],1)],2)],1)},i=[],o=n("5530"),l=(n("d81d"),n("99af"),n("159b"),n("4bda")),r={props:{items:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){return{}}}},data:function(){return{enumList:[],formList:[],info:{list:[]},active:!0}},beforeMount:function(){var e=this;this.items.map((function(t){e.info.list.push(t.initValue)})),this.formList=[].concat(this.items)},methods:{handleBottom:function(e){var t=this.formList.length,n=Math.ceil((e+1)/5)===Math.ceil(t/5)&&t>5?"m-b-0":"";return n=t%5?n:"",n},getEnumList:function(e,t){var n=this;if(1==e){console.log(e),console.log(t);var a={};this.enumList=[],a.relationId=t,Object(l["c"])(Object(o["a"])({},a)).then((function(e){n.enumList=e.data.enum_list}))}},handleSubmit:function(){var e=this,t={};this.info.list.forEach((function(n,a){t[e.formList[a].key]=n})),this.$emit("searchInfo",t)},resetForm:function(e){this.$refs[e].resetFields();var t=[];this.items.map((function(e){t.push(e.initValue)})),this.info.list=t}}},s=r,u=(n("4e96"),n("2877")),c=Object(u["a"])(s,a,i,!1,null,"fc705f3a",null);t["a"]=c.exports},"1d13":function(e,t,n){"use strict";var a={capacityList:[{name:70,value:70},{name:100,value:100}],batteryStatus:[{name:"正常",value:"正常"},{name:"回流",value:"回流"},{name:"停用",value:"停用"},{name:"退役",value:"退役"}],batteryPrice:[{name:7e4,value:7e4},{name:108e3,value:108e3}],payStatus:[{name:"已付清",value:"已付清"},{name:"未付清",value:"未付清"}],billingStatus:[{name:"已开票",value:"已开票"},{name:"未开票",value:"未开票"}],symbol:[{name:"大于",value:"大于"},{name:"等于",value:"等于"},{name:"大于等于",value:"大于等于"},{name:"小于",value:"小于"},{name:"小于等于",value:"小于等于"},{name:"不等于",value:"不等于"}],isRec:[{name:"未对符",value:"1"},{name:"已对符",value:"2"}],recStatus:[{name:"已对符",value:"0"},{name:"未对符",value:"1"}],reconStatus:[{name:"未对账",value:"0"},{name:"未对符",value:"1"},{name:"已对符",value:"2"}],costType:[{name:"租金",value:"租金"},{name:"租金加罚息",value:"租金加罚息"},{name:"提前还款",value:"提前还款"}],recType:[{name:"交付清单-应收账款",value:"0"},{name:"实收-扣款(第三方代扣)",value:"1"},{name:"实收-扣款(对公还款)",value:"2"}],isClaim:[{name:"已领取",value:"已领取"},{name:"未领取",value:"未领取"}],repaymentAmount:[{name:"980",value:"980"},{name:"1060",value:"1060"},{name:"1480",value:"1480"},{name:"1560",value:"1560"}],documentType:[{name:"企业收款",value:"企业收款"},{name:"企业付款",value:"企业付款"},{name:"企业资金调出",value:"企业资金调出"},{name:"企业资金调入",value:"企业资金调入"}],type:[{name:"对公支付",value:"对公支付"},{name:"第三方代扣",value:"第三方代扣"},{name:"其它",value:"其它"}],deductionType:[{name:"对公还款",value:"对公还款"},{name:"第三方代扣",value:"第三方代扣"},{name:"冲销",value:"冲销"}],splitStatus:[{name:"全部",value:"0"},{name:"不含拆分合并数据",value:"1"},{name:"拆分合并数据",value:"2"}]};t["a"]=a},3324:function(e,t,n){"use strict";n("d85a")},"3d01":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"battery"},[n("Search",{attrs:{items:e.formItems,options:e.options},on:{searchInfo:e.handleSearch}}),n("div",{staticClass:"search-btns m-b-10"},[n("el-row",[n("el-button",{attrs:{loading:e.downloadLoading,type:"primary",size:"mini",icon:"el-icon-download",disabled:!e.list||!e.list.length,plain:""},on:{click:e.handleDownload}},[e._v(" 导出Excel ")]),n("el-button",{attrs:{loading:e.downloadLoading,type:"primary",size:"mini",disabled:!e.list||!e.list.length,icon:"el-icon-download",plain:""},on:{click:e.downloadExcel}},[e._v(" 下载模板 ")]),n("el-upload",{staticStyle:{display:"inline-block","font-size":"20rpx",padding:"10px","box-sizing":"border-box"},attrs:{action:"/battery/excelImport","on-success":e.uploadSuccess,"show-file-list":!1,headers:e.token,"file-list":e.fileList}},[n("el-button",{attrs:{loading:e.uploadLoading,type:"primary",size:"mini",icon:"el-icon-upload2",plain:""}},[e._v("导入资产 ")])],1)],1)],1),n("div",{staticClass:"battery-content column"},[n("HomeTable",{ref:"table",attrs:{list:e.list,loading:e.loading},on:{updateState:e.getList}}),n("div",{staticClass:"battery-operate"}),n("el-pagination",{attrs:{"current-page":e.page.pageNo,"page-sizes":[20,50,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},i=[],o=n("5530"),l=(n("159b"),n("1427")),r=n("6dc5"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.list,height:e.height,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","tooltip-effect":"dark",size:"mini","cell-style":{"text-align":"right"},"header-cell-style":{"text-align":"center"},"header-row-class-name":"table-title",border:"","highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"baas_asset_number","show-overflow-tooltip":"","min-width":"130",label:"Baas电池编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"c-p active",on:{click:function(n){return e.toDetail(t.row.baas_asset_number)}}},[e._v(e._s(t.row.baas_asset_number||"-"))])]}}])}),n("el-table-column",{attrs:{prop:"nio_number","show-overflow-tooltip":"","min-width":"130",label:"NIO电池编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"c-p"},[e._v(e._s(t.row.nio_number||"-"))])]}}])}),e.showMore?n("el-table-column",{attrs:{prop:"gb_number","show-overflow-tooltip":"","min-width":"130",label:"电池国标编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"g-t-hidden"},[e._v(e._s(t.row.gb_number||"-"))])]}}],null,!1,174744333)}):e._e(),n("el-table-column",{attrs:{prop:"baas_number","min-width":"160",label:"租用订单编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"g-t-hidden"},[e._v(e._s(t.row.baas_number||"-"))])]}}])}),e.showMore?n("el-table-column",{attrs:{prop:"vin_number","min-width":"160",label:"车辆VIN码"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"g-t-hidden"},[e._v(e._s(t.row.vin_number||"-"))])]}}],null,!1,2434746169)}):e._e(),n("el-table-column",{attrs:{prop:"capacity","min-width":"80",label:"电池规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.capacity||"-")+" ")]}}])}),e.showMore?n("el-table-column",{attrs:{prop:"price","min-width":"80",label:"电池价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.price||"-")+" ")]}}],null,!1,928293245)}):e._e(),n("el-table-column",{attrs:{prop:"delivery_date","min-width":"100",label:"交付日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.delivery_date||"-")+" ")]}}])}),e.showMore?n("el-table-column",{attrs:{prop:"first_online_time","min-width":"110",label:"首次上线日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.first_online_time||"-")+" ")]}}],null,!1,3551991952)}):e._e(),e.showMore?n("el-table-column",{attrs:{prop:"status","min-width":"90",label:"服役状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.status||"-")+" ")]}}],null,!1,2571703812)}):e._e()],1)],1)},u=[],c={props:["list","loading"],mounted:function(){var e=this;this.$nextTick((function(){e.height=window.innerHeight-e.$refs.table.$el.offsetTop-182,window.onresize=function(){e.height=window.innerHeight-e.$refs.table.$el.offsetTop-182}}))},methods:{handleVerify:function(e){this.show=!0,this.form={id:e.id||"",remark:""}},handleOk:function(){},toDetail:function(e){this.$router.push("/battery/detail?id=".concat(e))}},watch:{},data:function(){return{show:!1,showMore:!0,height:800,form:{id:"",remark:""}}}},d=c,m=(n("3324"),n("2877")),f=Object(m["a"])(d,s,u,!1,null,"25037fc4",null),p=f.exports,h=n("1d13"),b=n("ed08"),v=n("5f87"),y={name:"Battery",filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},components:{Search:l["a"],HomeTable:p},created:function(){this.getToken(),this.initData(),this.getList()},methods:{getToken:function(){this.token.token=Object(v["a"])()},initData:function(){var e=this;this.formItems.forEach((function(t){e.searchInfo[t.key]=t.initValue}))},handleSearch:function(e){this.searchInfo=Object(o["a"])({},e),this.page.pageNo=1,this.getList()},handleSizeChange:function(e){this.page.pageSize=e,this.getList()},handleCurrentChange:function(e){this.page.pageNo=e,this.getList()},handleSearchData:function(){var e=Object(o["a"])(Object(o["a"])({},this.page),this.searchInfo);return e.delivery_date_begin=e.delivery_date[0]||"1970-01-01",e.delivery_date_end=e.delivery_date[1]||Object(b["b"])((new Date).getTime(),"{y}-{m}-{d}"),e.first_online_time_begin=e.first_online_time[0]||"1970-01-01",e.first_online_time_end=e.first_online_time[1]||Object(b["b"])((new Date).getTime(),"{y}-{m}-{d}"),delete e.delivery_date,delete e.first_online_time,delete e.total,e},getList:function(){var e=this;Object(r["g"])(Object(o["a"])({},this.handleSearchData())).then((function(t){e.page.total=t.data.total,e.list=t.data.battery_list||[]}))},uploadSuccess:function(){this.$message({message:"上传成功",type:"success"})},handleDownload:function(){Object(r["b"])(Object(o["a"])({},this.handleSearchData())).then((function(e){var t=Object(b["b"])((new Date).getTime(),"{y}年{m}月{d}日{h}时{i}分{s}秒"),n="BaaS电池列表_"+t+".xlsx";Object(b["a"])(e,n)}))},downloadExcel:function(){Object(r["a"])({}).then((function(e){Object(b["b"])((new Date).getTime(),"{y}年{m}月{d}日{h}时{i}分{s}秒");var t="资产模板.xlsx";Object(b["a"])(e,t)}))}},data:function(){return{loading:!1,downloadLoading:!1,uploadLoading:!1,fileList:[],page:{pageNo:1,pageSize:50,total:0},searchInfo:{},asyncInfo:{},list:[],options:{labelWidth:"0"},token:{token:""},capacityList:[],formItems:[{name:"交付",component:"el-date-picker",initValue:[],key:"delivery_date"},{name:"首次上线",component:"el-date-picker",initValue:[],key:"first_online_time"},{name:"价格",component:"el-select",initValue:"",list:h["a"].batteryPrice,key:"price"},{name:"电池规格",component:"el-select",initValue:"",list:h["a"].capacityList,key:"capacity"},{name:"服役状态",component:"el-select",initValue:"",list:h["a"].batteryStatus,key:"status"},{name:"NIO电池编码",component:"el-input",initValue:"",key:"nio_number"},{name:"租用订单编号",component:"el-input",initValue:"",key:"baas_number"},{name:"车辆VIN码",component:"el-input",initValue:"",key:"vin_number"},{name:"电池国标编码",component:"el-input",initValue:"",key:"gb_number"}]}}},g=y,_=(n("7f92"),Object(m["a"])(g,a,i,!1,null,"43d5413d",null));t["default"]=_.exports},"462b":function(e,t,n){},"4bda":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return c}));var a=n("b775");function i(e){return Object(a["a"])({url:"/battery/archives/infoPageList",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/battery/archives/save",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/battery/archivesSub/updateType",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/battery/archivesSub/infoPageList",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/battery/archivesSub/save",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/battery/archivesSub/typeList",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/battery/archivesSub/enum",method:"post",data:e})}},"4e96":function(e,t,n){"use strict";n("6310")},6310:function(e,t,n){},"6dc5":function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"j",(function(){return d})),n.d(t,"i",(function(){return m})),n.d(t,"h",(function(){return f}));var a=n("b775");function i(e){return Object(a["a"])({url:"/battery/infoPageList",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/battery/downloadInfoList",responseType:"blob",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/battery/downloadExcel",responseType:"blob",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/battery/baseInfo",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/battery/invoiceDetail/infoPageList",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/battery/invoiceDetail/downloadInfoList",responseType:"blob",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/battery/invoiceDetail/invoiceList",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/battery/updateBaseInfo",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/battery/history/queryInfo",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/battery/history/getBaseDifInfo",method:"post",data:e})}},"7f92":function(e,t,n){"use strict";n("462b")},d85a:function(e,t,n){},ed08:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var a=n("53ca");n("ac1f"),n("5319"),n("4d63"),n("25f0"),n("d3b7"),n("4d90"),n("1276"),n("159b"),n("3ca3"),n("ddb0"),n("2b3d");function i(e,t){if(0===arguments.length||!e)return null;var n,i=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(a["a"])(e)?n=e:("string"===typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"===typeof e&&10===e.toString().length&&(e*=1e3),n=new Date(e));var o={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},l=i.replace(/{([ymdhisa])+}/g,(function(e,t){var n=o[t];return"a"===t?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")}));return l}function o(e,t){var n=document.createElement("a");if(n.href=window.URL.createObjectURL(e),n.download=t,n.click(),window.URL.revokeObjectURL(n.href),navigator.userAgent.indexOf("Firefox")>-1){var a=document.createElement("a");a.addEventListener("click",(function(){a.download=t,a.href=URL.createObjectURL(e)}));var i=document.createEvent("MouseEvents");i.initEvent("click",!1,!1),a.dispatchEvent(i)}}}}]);