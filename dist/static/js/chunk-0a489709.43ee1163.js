(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a489709"],{1427:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("el-form",{ref:"form",staticClass:"search-items",attrs:{model:t.info,size:"mini","label-width":t.options.labelWidth||"0"}},[t._l(t.formList,(function(e,n){return[a("el-form-item",{key:n,staticClass:"search-item",class:t.handleBottom(n),attrs:{label:e.label,prop:"list"+n}},["el-input"===e.component?a("el-input",{attrs:{clearable:"",maxlength:e.maxlength||"-",placeholder:e.name},model:{value:t.info.list[n],callback:function(e){t.$set(t.info.list,n,e)},expression:"info.list[index]"}}):t._e(),"el-select"===e.component?a("el-select",{attrs:{filterable:e.filterable,clearable:"",placeholder:e.name},model:{value:t.info.list[n],callback:function(e){t.$set(t.info.list,n,e)},expression:"info.list[index]"}},t._l(e.list,(function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.value}})})),1):t._e(),"el-radio-group"===e.component?a("el-radio-group",{staticStyle:{"margin-top":"12px"},attrs:{clearable:""},model:{value:t.info.list[n],callback:function(e){t.$set(t.info.list,n,e)},expression:"info.list[index]"}},t._l(e.list,(function(e){return a("el-radio",{key:e,attrs:{label:e}},[t._v(t._s(e)+" ")])})),1):t._e(),"el-date-picker"===e.component&&"month"!==e.type?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":e.name+"起始日","end-placeholder":e.name+"结束日"},model:{value:t.info.list[n],callback:function(e){t.$set(t.info.list,n,e)},expression:"info.list[index]"}}):t._e(),"el-date-picker"===e.component&&"month"===e.type?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"monthrange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":e.name+"起始月","end-placeholder":e.name+"结束月"},model:{value:t.info.list[n],callback:function(e){t.$set(t.info.list,n,e)},expression:"info.list[index]"}}):t._e()],1)]})),a("div",{staticClass:"search-btns"}),a("div",{staticClass:"search-btns reset-position",class:t.formList.length<=4?"reset-bottom":""},[a("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleSubmit()}}},[t._v("查询")]),a("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.resetForm("form")}}},[t._v("重置")])],1)],2)],1)},i=[],o=a("5530"),s=(a("d81d"),a("99af"),a("159b"),a("4bda")),r={props:{items:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){return{}}}},data:function(){return{enumList:[],formList:[],info:{list:[]},active:!0}},beforeMount:function(){var t=this;this.items.map((function(e){t.info.list.push(e.initValue)})),this.formList=[].concat(this.items)},methods:{handleBottom:function(t){var e=this.formList.length,a=Math.ceil((t+1)/5)===Math.ceil(e/5)&&e>5?"m-b-0":"";return a=e%5?a:"",a},getEnumList:function(t,e){var a=this;if(1==t){console.log(t),console.log(e);var n={};this.enumList=[],n.relationId=e,Object(s["c"])(Object(o["a"])({},n)).then((function(t){a.enumList=t.data.enum_list}))}},handleSubmit:function(){var t=this,e={};this.info.list.forEach((function(a,n){e[t.formList[n].key]=a})),this.$emit("searchInfo",e)},resetForm:function(t){this.$refs[t].resetFields();var e=[];this.items.map((function(t){e.push(t.initValue)})),this.info.list=e}}},l=r,c=(a("4e96"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"fc705f3a",null);e["a"]=u.exports},2625:function(t,e,a){},"3b28":function(t,e,a){"use strict";a("a13a")},"4bda":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"g",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"f",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return u}));var n=a("b775");function i(t){return Object(n["a"])({url:"/battery/archives/infoPageList",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/battery/archives/save",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/battery/archivesSub/updateType",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/battery/archivesSub/infoPageList",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/battery/archivesSub/save",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/battery/archivesSub/typeList",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/battery/archivesSub/enum",method:"post",data:t})}},"4e82":function(t,e,a){"use strict";var n=a("23e7"),i=a("1c0b"),o=a("7b0b"),s=a("d039"),r=a("a640"),l=[],c=l.sort,u=s((function(){l.sort(void 0)})),d=s((function(){l.sort(null)})),f=r("sort"),h=u||!d||!f;n({target:"Array",proto:!0,forced:h},{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},"4e96":function(t,e,a){"use strict";a("6310")},"5b14":function(t,e,a){"use strict";a("2625")},6171:function(t,e,a){"use strict";a("159b"),a("b64b"),a("4e82"),a("a9e3")},6310:function(t,e,a){},a13a:function(t,e,a){},b92b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"battery"},[a("Search",{staticStyle:{"justify-content":"flex-start"},attrs:{items:t.formItems,options:t.options},on:{searchInfo:t.handleSearch}}),a("div",{staticClass:"search-btns m-b-10"},[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.insert()}}},[t._v("新增 ")])],1),a("div",{staticClass:"battery-content column"},[a("HomeTable",{ref:"table",attrs:{list:t.list,loading:t.loading},on:{updateState:t.getList}}),a("el-pagination",{attrs:{"current-page":t.page.pageNo,"page-sizes":[20,50,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"档案名称","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{width:"50%"},model:{value:t.form.archivesName,callback:function(e){t.$set(t.form,"archivesName",e)},expression:"form.archivesName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancle}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},i=[],o=a("5530"),s=(a("159b"),a("1427")),r=a("4bda"),l=(a("6171"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.list,height:t.height,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","tooltip-effect":"dark","cell-style":{"text-align":"right"},"header-cell-style":{"text-align":"center"},size:"mini","header-row-class-name":"table-title",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"archivesId","show-overflow-tooltip":"","min-width":"100",label:"档案编码"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"c-p"},[t._v(t._s(e.row.archivesId||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"archivesName","show-overflow-tooltip":"","min-width":"100",label:"档案名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"g-t-hidden"},[t._v(t._s(e.row.archivesName||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"createdUser","min-width":"100",label:"创建人"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"g-t-hidden"},[t._v(t._s(e.row.createdUser||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"createdTime","min-width":"100",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"g-t-hidden"},[t._v(t._s(e.row.createdTime||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"updatedUser","min-width":"100",label:"修改人"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.updatedUser||"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"updatedTime","min-width":"100",label:"修改时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.updatedTime||"-")+" ")]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"编辑",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("档案维护")])]}}])})],1)],1)}),c=[],u={props:["list","loading"],mounted:function(){var t=this;this.$nextTick((function(){t.height=window.innerHeight-t.$refs.table.$el.offsetTop-182,window.onresize=function(){t.height=window.innerHeight-t.$refs.table.$el.offsetTop-182}}))},methods:{handleClick:function(t){this.$router.push({name:"archives_detail_info",params:{relationId:t.archivesId,archivesName:t.archivesName}})},handleVerify:function(t){this.show=!0,this.form={id:t.id||"",remark:""}},handleOk:function(){}},watch:{},data:function(){return{show:!1,showMore:!0,height:800,form:{id:"",remark:""}}}},d=u,f=(a("5b14"),a("2877")),h=Object(f["a"])(d,l,c,!1,null,"cf28e8a8",null),m=h.exports,p=(a("ed08"),{name:"archives_info",filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},components:{Search:s["a"],HomeTable:m},created:function(){this.initData(),this.getList()},methods:{save:function(){var t=this;Object(r["e"])(Object(o["a"])({},this.form)).then((function(e){t.$message({message:"新增成功",type:"success"}),t.getList()})),this.dialogFormVisible=!1},cancle:function(){this.dialogFormVisible=!1},insert:function(){this.title="新增",this.form={},this.dialogFormVisible=!0,this.operateFlag="A"},initData:function(){var t=this;this.formItems.forEach((function(e){t.searchInfo[e.key]=e.initValue}))},handleSearch:function(t){this.searchInfo=Object(o["a"])({},t),this.page.pageNo=1,this.getList()},handleAsyncSearch:function(t){console.log(t),this.asyncInfo=Object(o["a"])({},t),this.page.pageNo=1,this.getList()},handleSizeChange:function(t){this.page.pageSize=t,this.getList()},handleCurrentChange:function(t){this.page.pageNo=t,this.getList()},handleSearchData:function(){var t=Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},this.page),this.searchInfo),this.asyncInfo),this.transferParams);return delete t.total,t},getList:function(){var t=this;Object(r["b"])(Object(o["a"])({},this.handleSearchData())).then((function(e){t.page.total=e.data.total,t.list=e.data.archives_list||[]}))}},data:function(){return{relationId:"",operateFlag:"",formLabelWidth:"120px",dialogFormVisible:!1,title:"",transferParams:[],dueDate:{},loading:!1,downloadLoading:!1,form:{archivesId:"",archivesName:""},page:{pageNo:1,pageSize:50,total:0},searchInfo:{},asyncInfo:{},list:[],options:{labelWidth:"0"},formItems:[{name:"自定义档案编码",component:"el-input",initValue:"",key:"archivesId"},{name:"自定义档案名称",component:"el-input",initValue:"",key:"archivesName"}]}}}),b=p,g=(a("3b28"),Object(f["a"])(b,n,i,!1,null,"767d1937",null));e["default"]=g.exports},ed08:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return o}));var n=a("53ca");a("ac1f"),a("5319"),a("4d63"),a("25f0"),a("d3b7"),a("4d90"),a("1276"),a("159b"),a("3ca3"),a("ddb0"),a("2b3d");function i(t,e){if(0===arguments.length||!t)return null;var a,i=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(n["a"])(t)?a=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),a=new Date(t));var o={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},s=i.replace(/{([ymdhisa])+}/g,(function(t,e){var a=o[e];return"a"===e?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return s}function o(t,e){var a=document.createElement("a");if(a.href=window.URL.createObjectURL(t),a.download=e,a.click(),window.URL.revokeObjectURL(a.href),navigator.userAgent.indexOf("Firefox")>-1){var n=document.createElement("a");n.addEventListener("click",(function(){n.download=e,n.href=URL.createObjectURL(t)}));var i=document.createEvent("MouseEvents");i.initEvent("click",!1,!1),n.dispatchEvent(i)}}}}]);