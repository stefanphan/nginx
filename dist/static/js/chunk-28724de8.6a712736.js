(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28724de8"],{"06e7":function(e,t,a){"use strict";a("c1b7")},1427:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("el-form",{ref:"form",staticClass:"search-items",attrs:{model:e.info,size:"mini","label-width":e.options.labelWidth||"0"}},[e._l(e.formList,(function(t,i){return[a("el-form-item",{key:i,staticClass:"search-item",class:e.handleBottom(i),attrs:{label:t.label,prop:"list"+i}},["el-input"===t.component?a("el-input",{attrs:{clearable:"",maxlength:t.maxlength||"-",placeholder:t.name},model:{value:e.info.list[i],callback:function(t){e.$set(e.info.list,i,t)},expression:"info.list[index]"}}):e._e(),"el-select"===t.component?a("el-select",{attrs:{filterable:t.filterable,clearable:"",placeholder:t.name},model:{value:e.info.list[i],callback:function(t){e.$set(e.info.list,i,t)},expression:"info.list[index]"}},e._l(t.list,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.value}})})),1):e._e(),"el-radio-group"===t.component?a("el-radio-group",{staticStyle:{"margin-top":"12px"},attrs:{clearable:""},model:{value:e.info.list[i],callback:function(t){e.$set(e.info.list,i,t)},expression:"info.list[index]"}},e._l(t.list,(function(t){return a("el-radio",{key:t,attrs:{label:t}},[e._v(e._s(t)+" ")])})),1):e._e(),"el-date-picker"===t.component&&"month"!==t.type?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":t.name+"起始日","end-placeholder":t.name+"结束日"},model:{value:e.info.list[i],callback:function(t){e.$set(e.info.list,i,t)},expression:"info.list[index]"}}):e._e(),"el-date-picker"===t.component&&"month"===t.type?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"monthrange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":t.name+"起始月","end-placeholder":t.name+"结束月"},model:{value:e.info.list[i],callback:function(t){e.$set(e.info.list,i,t)},expression:"info.list[index]"}}):e._e()],1)]})),a("div",{staticClass:"search-btns"}),a("div",{staticClass:"search-btns reset-position",class:e.formList.length<=4?"reset-bottom":""},[a("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleSubmit()}}},[e._v("查询")]),a("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")])],1)],2)],1)},n=[],r=a("5530"),s=(a("d81d"),a("99af"),a("159b"),a("4bda")),o={props:{items:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){return{}}}},data:function(){return{enumList:[],formList:[],info:{list:[]},active:!0}},beforeMount:function(){var e=this;this.items.map((function(t){e.info.list.push(t.initValue)})),this.formList=[].concat(this.items)},methods:{handleBottom:function(e){var t=this.formList.length,a=Math.ceil((e+1)/5)===Math.ceil(t/5)&&t>5?"m-b-0":"";return a=t%5?a:"",a},getEnumList:function(e,t){var a=this;if(1==e){console.log(e),console.log(t);var i={};this.enumList=[],i.relationId=t,Object(s["c"])(Object(r["a"])({},i)).then((function(e){a.enumList=e.data.enum_list}))}},handleSubmit:function(){var e=this,t={};this.info.list.forEach((function(a,i){t[e.formList[i].key]=a})),this.$emit("searchInfo",t)},resetForm:function(e){this.$refs[e].resetFields();var t=[];this.items.map((function(e){t.push(e.initValue)})),this.info.list=t}}},l=o,c=(a("4e96"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,"fc705f3a",null);t["a"]=d.exports},"4bda":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"g",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return d}));var i=a("b775");function n(e){return Object(i["a"])({url:"/battery/archives/infoPageList",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/battery/archives/save",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/battery/archivesSub/updateType",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/battery/archivesSub/infoPageList",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/battery/archivesSub/save",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/battery/archivesSub/typeList",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/battery/archivesSub/enum",method:"post",data:e})}},"4e82":function(e,t,a){"use strict";var i=a("23e7"),n=a("1c0b"),r=a("7b0b"),s=a("d039"),o=a("a640"),l=[],c=l.sort,d=s((function(){l.sort(void 0)})),u=s((function(){l.sort(null)})),f=o("sort"),h=d||!u||!f;i({target:"Array",proto:!0,forced:h},{sort:function(e){return void 0===e?c.call(r(this)):c.call(r(this),n(e))}})},"4e96":function(e,t,a){"use strict";a("6310")},6171:function(e,t,a){"use strict";a("159b"),a("b64b"),a("4e82"),a("a9e3")},6310:function(e,t,a){},b9e9:function(e,t,a){},c1b7:function(e,t,a){},d02c:function(e,t,a){"use strict";a("b9e9")},dcf6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"battery"},[a("div",{staticClass:"search-btns m-b-10"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"档案编号"}},[a("el-input",{attrs:{placeholder:"审批人",disabled:""},model:{value:e.formInline.archivesId,callback:function(t){e.$set(e.formInline,"archivesId",t)},expression:"formInline.archivesId"}})],1),a("el-form-item",{attrs:{label:"档案名称"}},[a("el-input",{attrs:{placeholder:"审批人",disabled:""},model:{value:e.formInline.archivesName,callback:function(t){e.$set(e.formInline,"archivesName",t)},expression:"formInline.archivesName"}})],1)],1),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.insert()}}},[e._v("新增 ")]),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.update()}}},[e._v("修改 ")])],1),a("div",{staticClass:"battery-content column"},[a("HomeTable",{ref:"table",attrs:{list:e.list,loading:e.loading},on:{updateState:e.getList,setUpdateInfo:e.setUpdateInfo}}),a("el-pagination",{attrs:{"current-page":e.page.pageNo,"page-sizes":[20,50,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.form.archivesName,callback:function(t){e.$set(e.form,"archivesName",t)},expression:"form.archivesName"}})],1),a("el-form-item",{attrs:{label:"上级档案编码","label-width":e.formLabelWidth}},[a("el-select",{attrs:{clearable:"",placeholder:"选择上级档案"},on:{change:e.getArchivesSubName},model:{value:e.form.parentArchivesId,callback:function(t){e.$set(e.form,"parentArchivesId",t)},expression:"form.parentArchivesId"}},e._l(e.typeSelect,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancle}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible2},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("el-form",{attrs:{model:e.form2}},[a("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.form2.archivesName,callback:function(t){e.$set(e.form2,"archivesName",t)},expression:"form2.archivesName"}})],1),a("el-form-item",{attrs:{label:"上级档案编号","label-width":e.formLabelWidth}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择上级档案"},model:{value:e.form2.parentArchivesId,callback:function(t){e.$set(e.form2,"parentArchivesId",t)},expression:"form2.parentArchivesId"}},e._l(e.typeSelect,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea"},model:{value:e.form2.remark,callback:function(t){e.$set(e.form2,"remark",t)},expression:"form2.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancle}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},n=[],r=a("5530"),s=a("1427"),o=a("4bda"),l=(a("6171"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.list2,height:e.height,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","tooltip-effect":"dark",size:"mini","cell-style":{"text-align":"right"},"header-cell-style":{"text-align":"center"},"header-row-class-name":"table-title",border:"","highlight-current-row":""},on:{"row-click":e.setUpdateInfo}},[a("el-table-column",{attrs:{prop:"archivesId","show-overflow-tooltip":"","min-width":"100",label:"编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"c-p"},[e._v(e._s(t.row.archivesId||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"archivesName","show-overflow-tooltip":"","min-width":"100",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"g-t-hidden"},[e._v(e._s(t.row.archivesName||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"parentArchivesId","show-overflow-tooltip":"","min-width":"100",label:"上级档案编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"g-t-hidden"},[e._v(e._s(t.row.parentArchivesId||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":"","min-width":"100",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"g-t-hidden"},[e._v(e._s(t.row.remark||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"deleted","min-width":"100",label:"封存"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{on:{command:e.changeStatus}},[0==t.row.deleted?a("span",{staticClass:"el-dropdown-link"},[e._v(" 否"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]):e._e(),1==t.row.deleted?a("span",{staticClass:"el-dropdown-link"},[e._v(" 是"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]):e._e(),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{type:0,row:t.row}}},[e._v("否")]),a("el-dropdown-item",{attrs:{command:{type:1,row:t.row}}},[e._v("是")])],1)],1)]}}])}),a("el-table-column",{attrs:{prop:"createdUser","min-width":"100",label:"创建人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"g-t-hidden"},[e._v(e._s(t.row.createdUser||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"createdTime","min-width":"100",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"g-t-hidden"},[e._v(e._s(t.row.createdTime||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"updatedUser","min-width":"100",label:"修改人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.updatedUser||"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"updatedTime","min-width":"100",label:"修改时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.updatedTime||"-")+" ")]}}])})],1)],1)}),c=[],d=(a("d81d"),a("99af"),{props:["list","loading"],mounted:function(){var e=this;this.$nextTick((function(){e.height=window.innerHeight-e.$refs.table.$el.offsetTop-182,window.onresize=function(){e.height=window.innerHeight-e.$refs.table.$el.offsetTop-182}}))},methods:{setUpdateInfo:function(e){this.$emit("setUpdateInfo",e)},handleVerify:function(e){this.show=!0,this.form={id:e.id||"",remark:""}},handleOk:function(){},changeStatus:function(e){var t=this,a=0;this.list2.map((function(t,i){t.archivesId===e.row.archivesId&&(a=i)}));var i={};i.archivesId=e.row.archivesId,i.deleted=e.type,Object(o["g"])(i).then((function(){t.$message({message:"更新成功",type:"success"}),t.$set(t.list2,a,Object(r["a"])(Object(r["a"])({},e.row),{},{deleted:e.type}))}))}},watch:{list:{handler:function(e){this.list2=[].concat(e)}}},data:function(){return{list2:[],show:!1,showMore:!0,height:800,form:{id:"",remark:""}}}}),u=d,f=(a("d02c"),a("2877")),h=Object(f["a"])(u,l,c,!1,null,"74346e66",null),m=h.exports,p=(a("ed08"),{name:"archives_detail_info",filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},components:{Search:s["a"],HomeTable:m},created:function(){this.initData(),this.getList(),this.getTypeList()},methods:{setUpdateInfo:function(e){this.form2=e},formatDeleted:function(e){return 0===e.deleted?"否":"是"},save:function(){var e=this;"A"==this.operateFlag?(this.transform=this.form,this.transform.relationId=this.relationId,Object(o["f"])(Object(r["a"])({},this.transform)).then((function(t){"200"==t.code?e.$message({message:"新增成功",type:"success"}):e.$message({message:"新增失败",type:"error"}),e.cancle(),e.getList(),e.getTypeList()}))):(this.transform=this.form2,this.transform.relationId=this.relationId,Object(o["g"])(Object(r["a"])({},this.transform)).then((function(t){"200"==t.code?e.$message({message:"更新成功",type:"success"}):e.$message({message:"更新失败",type:"error"}),e.cancle(),e.getList(),e.getTypeList()})))},cancle:function(){"A"==this.operateFlag?(this.form={},this.dialogFormVisible=!1):this.dialogFormVisible2=!1},insert:function(){this.title="新增",this.operateFlag="A",this.form={},this.dialogFormVisible=!0},update:function(){this.title="修改",this.operateFlag="U",""==this.form2.archivesId?this.$message({message:"请先选中一行数据",type:"info"}):this.dialogFormVisible2=!0},initData:function(){this.formInline.archivesName=this.$route.params.archivesName,this.relationId=this.$route.params.relationId,this.formInline.archivesId=this.$route.params.relationId},handleSearch:function(e){this.searchInfo=Object(r["a"])({},e),this.page.pageNo=1,this.getList()},handleAsyncSearch:function(e){this.asyncInfo=Object(r["a"])({},e),this.page.pageNo=1,this.getList()},handleSizeChange:function(e){this.page.pageSize=e,this.getList()},handleCurrentChange:function(e){this.page.pageNo=e,this.getList()},handleSearchData:function(){var e={};e.relationId=this.relationId;var t=Object(r["a"])(Object(r["a"])({},this.page),e);return delete t.total,t},getList:function(){var e=this;Object(o["a"])(Object(r["a"])({},this.handleSearchData())).then((function(t){e.page.total=t.data.total,e.list=t.data.archives_list||[]}))},getTypeList:function(){var e=this;Object(o["d"])(Object(r["a"])({},this.handleSearchData())).then((function(t){var a=t.data.type_list||[],i=a;for(var n in e.archivesList=a,e.typeSelect=[],i)e.typeSelect.push({value:n,label:i[n]});console.log(e.typeSelect)}))},getArchivesSubName:function(e){this.form.parentArchivesName=this.archivesList[e]}},data:function(){return{archivesList:[],relationId:"",formLabelWidth:"160px",operateFlag:"",dialogFormVisible:!1,dialogFormVisible2:!1,title:"",transferParams:[],dueDate:{},loading:!1,downloadLoading:!1,typeSelect:[],transform:{},formInline:{},form:{archivesId:"",archivesName:"",level:"",parentArchivesId:"",remark:"",relationId:""},form2:{archivesId:"",archivesName:"",level:"",parentArchivesId:"",remark:"",relationId:""},page:{pageNo:1,pageSize:50,total:0},searchInfo:{},asyncInfo:{},list:[],options:{labelWidth:"0"}}}}),b=p,v=(a("06e7"),Object(f["a"])(b,i,n,!1,null,"5b5dc730",null));t["default"]=v.exports},ed08:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var i=a("53ca");a("ac1f"),a("5319"),a("4d63"),a("25f0"),a("d3b7"),a("4d90"),a("1276"),a("159b"),a("3ca3"),a("ddb0"),a("2b3d");function n(e,t){if(0===arguments.length||!e)return null;var a,n=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(i["a"])(e)?a=e:("string"===typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"===typeof e&&10===e.toString().length&&(e*=1e3),a=new Date(e));var r={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},s=n.replace(/{([ymdhisa])+}/g,(function(e,t){var a=r[t];return"a"===t?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return s}function r(e,t){var a=document.createElement("a");if(a.href=window.URL.createObjectURL(e),a.download=t,a.click(),window.URL.revokeObjectURL(a.href),navigator.userAgent.indexOf("Firefox")>-1){var i=document.createElement("a");i.addEventListener("click",(function(){i.download=t,i.href=URL.createObjectURL(e)}));var n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),i.dispatchEvent(n)}}}}]);